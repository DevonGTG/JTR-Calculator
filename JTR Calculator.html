<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Cost Estimator</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f6f9;
      padding: 10px;
      color: #333;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
    }
    .header img {
      height: 100;
    }
    .header h1 {
      flex: 1;
      text-align: center;
      color: #003366;
      font-size: 28px;
      margin: 0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      overflow: hidden;
    }
    th, td {
      padding: 12px 16px;
      text-align: left;
    }
    th {
      background-color: #003366;
      color: #fff;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 12px;
    }
	.hidden-row {
	  display: none;
	}
    .section-header {
      background-color: #e9edf3;
      font-weight: bold;
      text-align: center;
      text-transform: uppercase;
      color: #444;
    }
    .bold-row td {
      font-weight: bold;
      background-color: #f7f9fc;
    }
    input[type="number"], input[type="text"] {
      width: 100%;
      padding: 6px 10px;
      box-sizing: border-box;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    input[readonly] {
      background-color: #f0f0f0;
      color: #666;
    }
    .highlight-red {
      background-color: #ffe5e5 !important;
    }
    .highlight-yellow {
      background-color: #fffacc !important;
    }
    .highlight-green {
      background-color: #d4f8d4 !important;
    }
  </style>
</head>
<body>
  <div class="header">
    <a href="https://www.jtrestoration.com/">
      	<img src="https://www.jtrestoration.com/wp-content/uploads/2024/05/jtr-2024-logo.webp" alt="Company Logo" width="125" height="100">
   	</a>
    <h1 style="text-align: center">Job Cost Estimator</h1>
    <div style="width: 60px;"></div>
  </div>

  <div id="calculatorContainer">
      <table>
        <thead>
          <tr>
            <th>Description</th>
            <th>Amount (U$)</th>
            <th>%</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bold-row">
            <td>Gross Revenue</td>
            <td><input type="number" id="grossRevenue"></td>
            <td><input type="text" value="100%" readonly=""></td>
          </tr>
          <tr class="section-header">
            <td colspan="3">COGS</td>
          </tr>
          <tr>
        <td>Vendor Program Fees</td>
        <td><input type="number" id="vendorFees" readonly=""></td>
        <td><input type="text" id="vendorPercent"></td>
      </tr>
          <tr class="hidden-row">
        <td>Vehicles</td>
        <td><input type="number" id="vehicles" readonly=""></td>
        <td><input type="text" id="vehiclesPercent" readonly=""></td>
      </tr>
          <tr class="hidden-row">
        <td>Supplies</td>
        <td><input type="number" id="supplies" readonly=""></td>
        <td><input type="text" id="suppliesPercent" readonly=""></td>
      </tr>
          <tr>
        <td>Sub-Contractor Services</td>
        <td><input type="number" id="subContractors"></td>
        <td><input type="text" id="subPercent" readonly=""></td>
      </tr>
          <tr class="hidden-row">
        <td>Dump Fees</td>
        <td><input type="number" id="dumpFees" readonly=""></td>
        <td><input type="text" id="dumpPercent" readonly=""></td>
      </tr>
          <tr class="hidden-row">
        <td>Workers Comp + Taxes</td>
        <td><input type="number" id="workersComp" readonly=""></td>
        <td><input type="text" id="workersCompPercent" readonly=""></td>
      </tr>
          <tr>
        <td>Labor</td>
        <td><input type="number" id="labor" readonly=""></td>
        <td><input type="text" id="laborPercent" readonly=""></td>
      </tr>
          <tr class="hidden-row">
        <td>Shop Hours</td>
        <td><input type="number" id="shopHours" readonly=""></td>
        <td><input type="text" id="shopPercent" readonly=""></td>
      </tr>
          <tr class="hidden-row">
        <td>Commissions</td>
        <td><input type="number" id="commissions" readonly=""></td>
        <td><input type="text" id="commissionsPercent" readonly=""></td>
      </tr>

          <tr class="section-header">
            <td colspan="3">Labor Calc</td>
          </tr>
          <tr>
            <td>Regular</td>
            <td><input type="number" id="regularHours"></td>
            <td><input type="text" id="regularValue" readonly=""></td>
          </tr>
          <tr>
            <td>Over Time</td>
            <td><input type="number" id="overTimeHours"></td>
            <td><input type="text" id="overTimeValue" readonly=""></td>
          </tr>
          <tr class="bold-row">
            <td>Total Labor Hours</td>
            <td><input type="text" id="totalLaborHours" readonly=""></td>
            <td><input type="text" id="totalLaborValue" readonly=""></td>
          </tr>
          <tr class="bold-row">
            <td>Total COGS</td>
            <td><input type="text" id="totalCOGS" readonly=""></td>
            <td><input type="text" id="totalCOGSPercent" readonly=""></td>
          </tr>
          <tr class="bold-row">
            <td>Gross Margin</td>
            <td><input type="text" id="grossMargin" readonly=""></td>
            <td><input type="text" id="grossMarginPercent" readonly=""></td>
          </tr>
        </tbody>
      </table>
    </div>

  <script>
    function createRow(desc, idValue, idPercent, showField = true, editableValue = false, editablePercent = false) {
      return `<tr ${showField ? '' : 'class="hidden-row"'}>
        <td>${desc}</td>
        <td><input type="number" id="${idValue}" ${editableValue ? '' : 'readonly'} /></td>
        <td><input type="text" id="${idPercent}" ${editablePercent ? '' : 'readonly'} /></td>
      </tr>`;
    }

    document.getElementById('calculatorContainer').innerHTML = `
      <table>
        <thead>
          <tr>
            <th>Description</th>
            <th>Amount (U$)</th>
            <th>%</th>
          </tr>
        </thead>
        <tbody>
          <tr class="bold-row">
            <td>Gross Revenue</td>
            <td><input type="number" id="grossRevenue" /></td>
            <td><input type="text" value="100%" readonly /></td>
          </tr>
          <tr class="section-header">
            <td colspan="3">COGS</td>
          </tr>
          ${createRow('Vendor Program Fees', 'vendorFees', 'vendorPercent', true, false, true)}
          ${createRow('Vehicles', 'vehicles', 'vehiclesPercent', false)}
          ${createRow('Supplies', 'supplies', 'suppliesPercent', false)}
          ${createRow('Sub-Contractor Services', 'subContractors', 'subPercent', true, true)}
          ${createRow('Dump Fees', 'dumpFees', 'dumpPercent', false, false)}
          ${createRow('Workers Comp + Taxes', 'workersComp', 'workersCompPercent', false)}
          ${createRow('Labor', 'labor', 'laborPercent', true)}
          ${createRow('Shop Hours', 'shopHours', 'shopPercent', false)}
          ${createRow('Commissions', 'commissions', 'commissionsPercent', false)}

          <tr class="section-header">
            <td colspan="3">Labor Calc</td>
          </tr>
          <tr>
            <td>Regular</td>
            <td><input type="number" id="regularHours" /></td>
            <td><input type="text" id="regularValue" readonly /></td>
          </tr>
          <tr>
            <td>Over Time</td>
            <td><input type="number" id="overTimeHours" /></td>
            <td><input type="text" id="overTimeValue" readonly /></td>
          </tr>
          <tr class="bold-row">
            <td>Total Labor Hours</td>
            <td><input type="text" id="totalLaborHours" readonly /></td>
            <td><input type="text" id="totalLaborValue" readonly /></td>
          </tr>
          <tr class="bold-row">
            <td>Total COGS</td>
            <td><input type="text" id="totalCOGS" readonly /></td>
            <td><input type="text" id="totalCOGSPercent" readonly /></td>
          </tr>
          <tr class="bold-row">
            <td>Gross Margin</td>
            <td><input type="text" id="grossMargin" readonly /></td>
            <td><input type="text" id="grossMarginPercent" readonly /></td>
          </tr>
        </tbody>
      </table>
    `;

    function formatCurrency(value) {
      return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(value);
    }

    function updateCalculations() {
      const gr = parseFloat(document.getElementById('grossRevenue').value) || 0;
      const vendorPercent = parseFloat(document.getElementById('vendorPercent').value) || 0;
      const vendor = gr * (vendorPercent / 100);
      document.getElementById('vendorFees').value = vendor.toFixed(2);

      const vehicles = gr * 0.04;
      document.getElementById('vehicles').value = vehicles.toFixed(2);
      document.getElementById('vehiclesPercent').value = '4%';

      const supplies = gr * 0.038;
      document.getElementById('supplies').value = supplies.toFixed(2);
      document.getElementById('suppliesPercent').value = '3.8%';

      const sub = parseFloat(document.getElementById('subContractors').value) || 0;
      document.getElementById('subPercent').value = gr ? Math.round((sub / gr) * 100) + '%' : '';

      const dumps = gr * 0.007;
      document.getElementById('dumpFees').value = dumps.toFixed(2);
      document.getElementById('dumpPercent').value = '0.7%';

      const commissions = gr * 0.15;
      document.getElementById('commissions').value = commissions.toFixed(2);
      document.getElementById('commissionsPercent').value = '15%';

      const regular = parseFloat(document.getElementById('regularHours').value) || 0;
      const overTime = parseFloat(document.getElementById('overTimeHours').value) || 0;
      const regVal = regular * 20;
      const otVal = overTime * 30;
      document.getElementById('regularValue').value = formatCurrency(regVal);
      document.getElementById('overTimeValue').value = formatCurrency(otVal);

      const totalLabor = regVal + otVal;
      document.getElementById('totalLaborHours').value = totalLabor.toFixed(2);
      document.getElementById('totalLaborValue').value = '';

      document.getElementById('labor').value = totalLabor.toFixed(2);
      document.getElementById('laborPercent').value = gr ? Math.round((totalLabor / gr) * 100) + '%' : '';

      const workersComp = totalLabor * 0.1 + commissions * 0.1;
      document.getElementById('workersComp').value = workersComp.toFixed(2);
      document.getElementById('workersCompPercent').value = '10%';

      const shop = gr * 0.005;
      document.getElementById('shopHours').value = shop.toFixed(2);
      document.getElementById('shopPercent').value = '0.5%';

      const totalCOGS = vendor + vehicles + supplies + sub + dumps + workersComp + totalLabor + shop + commissions;
      document.getElementById('totalCOGS').value = totalCOGS.toFixed(2);
      const totalCOGSPercent = gr ? (totalCOGS / gr) * 100 : 0;
      document.getElementById('totalCOGSPercent').value = totalCOGSPercent.toFixed(0) + '%';

      const grossMargin = gr - totalCOGS;
      const grossMarginPercent = gr ? (grossMargin / gr) * 100 : 0;
      document.getElementById('grossMargin').value = grossMargin.toFixed(2);
      const gmp = document.getElementById('grossMarginPercent');
      gmp.value = Math.round(grossMarginPercent) + '%';

      gmp.classList.remove('highlight-red', 'highlight-yellow', 'highlight-green');
      if (grossMarginPercent < 52) gmp.classList.add('highlight-red');
      else if (grossMarginPercent < 55) gmp.classList.add('highlight-yellow');
      else gmp.classList.add('highlight-green');
    }

    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('input', updateCalculations);
    });
  </script>

</body></html>